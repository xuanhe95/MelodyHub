{"ast":null,"code":"// assets\nimport { IconKey, IconPlaylist } from '@tabler/icons-react';\nimport config from '../../../../config.json';\n\n// constant\nconst icons = {\n  IconKey,\n  IconPlaylist\n};\n\n// ==============================|| EXTRA PAGES MENU ITEMS ||============================== //\n\n// 根据用户播放列表数据生成菜单项\nconst generatePlaylistMenuItems = () => {\n  try {\n    const token = localStorage.getItem('token');\n    if (token === null) {\n      console.error('Token is null');\n      return [];\n    }\n    const headers = new Headers();\n    headers.append('Authorization', `Bearer ${token}`);\n    headers.append('Content-Type', 'application/json');\n    const requestOptions = {\n      method: 'GET',\n      headers: headers,\n      redirect: 'follow'\n    };\n    const response = fetch(`http://${config.server_host}:${config.server_port}/api/playlists`, requestOptions);\n    const userPlaylists = response.json();\n    return userPlaylists.map(playlist => ({\n      id: playlist.id,\n      title: playlist.title,\n      type: 'item',\n      url: playlist.url,\n      target: false\n    }));\n  } catch (error) {\n    console.error('Error during fetching playlists:', error.message);\n    return [];\n  }\n};\nconst pages = {\n  id: 'pages',\n  // title: 'PlayLists',\n  // caption: 'All Musics',\n  type: 'group',\n  children: [{\n    id: 'playlists',\n    title: 'Playlists',\n    type: 'collapse',\n    icon: icons.IconPlaylist,\n    children: generatePlaylistMenuItems()\n    // 使用动态生成的播放列表项\n  }, {\n    id: 'authentication',\n    title: 'Authentication',\n    type: 'collapse',\n    icon: icons.IconKey,\n    children: [{\n      id: 'login3',\n      title: 'Login',\n      type: 'item',\n      url: '/pages/login/login3',\n      target: true\n    }, {\n      id: 'register3',\n      title: 'Register',\n      type: 'item',\n      url: '/pages/register/register3',\n      target: true\n    }]\n  }]\n};\nexport default pages;","map":{"version":3,"names":["IconKey","IconPlaylist","config","icons","generatePlaylistMenuItems","token","localStorage","getItem","console","error","headers","Headers","append","requestOptions","method","redirect","response","fetch","server_host","server_port","userPlaylists","json","map","playlist","id","title","type","url","target","message","pages","children","icon"],"sources":["/Users/xander/Documents/MCIT/MelodyTracker/client/web/create-react-app/src/menu-items/pages.js"],"sourcesContent":["// assets\nimport { IconKey, IconPlaylist } from '@tabler/icons-react';\nimport config from '../../../../config.json';\n\n// constant\nconst icons = {\n  IconKey, IconPlaylist\n};\n\n// ==============================|| EXTRA PAGES MENU ITEMS ||============================== //\n\n\n\n// 根据用户播放列表数据生成菜单项\nconst generatePlaylistMenuItems = () => {\n\n  try {\n    const token = localStorage.getItem('token');\n    if (token === null) {\n      console.error('Token is null');\n      return [];\n    }\n    const headers = new Headers();\n    headers.append('Authorization', `Bearer ${token}`);\n    headers.append('Content-Type', 'application/json');\n    const requestOptions = {\n      method: 'GET',\n      headers: headers,\n      redirect: 'follow'\n    };\n\n    const response = fetch(`http://${config.server_host}:${config.server_port}/api/playlists`, requestOptions);\n    const userPlaylists = response.json();\n\n    return userPlaylists.map((playlist) => ({\n      id: playlist.id,\n      title: playlist.title,\n      type: 'item',\n      url: playlist.url,\n      target: false\n    }));\n\n  } catch (error) {\n    console.error('Error during fetching playlists:', error.message);\n    return [];\n  }\n\n};\n\nconst pages = {\n  id: 'pages',\n  // title: 'PlayLists',\n  // caption: 'All Musics',\n  type: 'group',\n  children: [\n    {\n      id: 'playlists',\n      title: 'Playlists',\n      type: 'collapse',\n      icon: icons.IconPlaylist,\n      children:\n        generatePlaylistMenuItems()\n      // 使用动态生成的播放列表项\n    },\n\n    {\n      id: 'authentication',\n      title: 'Authentication',\n      type: 'collapse',\n      icon: icons.IconKey,\n\n      children: [\n        {\n          id: 'login3',\n          title: 'Login',\n          type: 'item',\n          url: '/pages/login/login3',\n          target: true\n        },\n        {\n          id: 'register3',\n          title: 'Register',\n          type: 'item',\n          url: '/pages/register/register3',\n          target: true\n        }\n      ]\n    },\n  ]\n};\n\nexport default pages;\n"],"mappings":"AAAA;AACA,SAASA,OAAO,EAAEC,YAAY,QAAQ,qBAAqB;AAC3D,OAAOC,MAAM,MAAM,yBAAyB;;AAE5C;AACA,MAAMC,KAAK,GAAG;EACZH,OAAO;EAAEC;AACX,CAAC;;AAED;;AAIA;AACA,MAAMG,yBAAyB,GAAGA,CAAA,KAAM;EAEtC,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,KAAK,IAAI,EAAE;MAClBG,OAAO,CAACC,KAAK,CAAC,eAAe,CAAC;MAC9B,OAAO,EAAE;IACX;IACA,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,CAAC;IAC7BD,OAAO,CAACE,MAAM,CAAC,eAAe,EAAG,UAASP,KAAM,EAAC,CAAC;IAClDK,OAAO,CAACE,MAAM,CAAC,cAAc,EAAE,kBAAkB,CAAC;IAClD,MAAMC,cAAc,GAAG;MACrBC,MAAM,EAAE,KAAK;MACbJ,OAAO,EAAEA,OAAO;MAChBK,QAAQ,EAAE;IACZ,CAAC;IAED,MAAMC,QAAQ,GAAGC,KAAK,CAAE,UAASf,MAAM,CAACgB,WAAY,IAAGhB,MAAM,CAACiB,WAAY,gBAAe,EAAEN,cAAc,CAAC;IAC1G,MAAMO,aAAa,GAAGJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAErC,OAAOD,aAAa,CAACE,GAAG,CAAEC,QAAQ,KAAM;MACtCC,EAAE,EAAED,QAAQ,CAACC,EAAE;MACfC,KAAK,EAAEF,QAAQ,CAACE,KAAK;MACrBC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAEJ,QAAQ,CAACI,GAAG;MACjBC,MAAM,EAAE;IACV,CAAC,CAAC,CAAC;EAEL,CAAC,CAAC,OAAOnB,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAACoB,OAAO,CAAC;IAChE,OAAO,EAAE;EACX;AAEF,CAAC;AAED,MAAMC,KAAK,GAAG;EACZN,EAAE,EAAE,OAAO;EACX;EACA;EACAE,IAAI,EAAE,OAAO;EACbK,QAAQ,EAAE,CACR;IACEP,EAAE,EAAE,WAAW;IACfC,KAAK,EAAE,WAAW;IAClBC,IAAI,EAAE,UAAU;IAChBM,IAAI,EAAE7B,KAAK,CAACF,YAAY;IACxB8B,QAAQ,EACN3B,yBAAyB,CAAC;IAC5B;EACF,CAAC,EAED;IACEoB,EAAE,EAAE,gBAAgB;IACpBC,KAAK,EAAE,gBAAgB;IACvBC,IAAI,EAAE,UAAU;IAChBM,IAAI,EAAE7B,KAAK,CAACH,OAAO;IAEnB+B,QAAQ,EAAE,CACR;MACEP,EAAE,EAAE,QAAQ;MACZC,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAE,qBAAqB;MAC1BC,MAAM,EAAE;IACV,CAAC,EACD;MACEJ,EAAE,EAAE,WAAW;MACfC,KAAK,EAAE,UAAU;MACjBC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAE,2BAA2B;MAChCC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC;AAEL,CAAC;AAED,eAAeE,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}